<link href="/css/material-bootstrap-wizard.css" rel="stylesheet" />
<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <!--      Wizard container        -->
    <div class="wizard-container">
      <div class="card wizard-card" data-color="purple" id="wizardProfile">
        <form id="addGameForm" onsubmit="return false;">
          <div class="wizard-header">
            <h3 class="wizard-title">
		          Dodawanie nowego meczu
		        </h3>
          </div>
          <div class="wizard-navigation">
            <ul>
              <li><a href="#basic" data-toggle="tab">Podstawowe informacje</a></li>
              <li><a href="#score" data-toggle="tab">Wynik</a></li>
              <li><a href="#event" data-toggle="tab">Rozgrywki</a></li>
              <li><a href="#players" data-toggle="tab">Zawodnicy</a></li>
            </ul>
          </div>

          <div class="tab-content">
            <div class="tab-pane" id="basic">
              <h4 class="info-text"> Podaj podstawowe informacje na temat drużyny. </h4>
              <div class="row">
                <div class="col-md-6">
                  <div class="input-group">
                    <span class="input-group-addon">
														<i class="material-icons">face</i>
													</span>
                    <div class="form-group label-floating">
                      <label class="control-label">Nazwa drużyny <small>(wymagana)</small></label>
                      <input name="name" type="text" class="form-control">
                    </div>
                  </div>
                  <div class="input-group">
                    <span class="input-group-addon">
														<i class="material-icons">photo</i>
													</span>
                    <div class="form-group label-floating">
                      <label class="control-label">Logo drużyny <small>(url)</small></label>
                      <input name="logo" type="url" class="form-control">
                    </div>
                  </div>
                  <div class="input-group">
                    <span class="input-group-addon">
											<i class="material-icons">event</i>
										</span>
                    <div class="form-group label-floating">
                      <label class="control-label">Data spotkania <small>(wymagana)</small></label>
                      <input type="text" name="date" id="date" class="form-control">
                    </div>
                  </div>
                </div>
                <div class="col-md-4 col-md-offset-1">
                  <div class="choice" data-toggle="wizard-checkbox">
                    <input type="checkbox" name="home" value="on">
                    <div class="icon">
                      <i class="fa fa-plane"></i>
                    </div>
                    <h6>Wyjazd</h6>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="score">
              <h4 class="info-text"> Podaj wynik poszczególnych tercji? </h4>
              <div class="row">
                <div class="col-md-10 col-md-offset-1">
                  <div class="col-md-4">
                    <div class="input-group">
                      <span class="input-group-addon">
  											<i class="material-icons">looks_one</i>
  									  </span>
                      <div class="form-group label-floating">
                        <label class="control-label">Nasz<small>(wymagane)</small></label>
                        <input name="firstOur" type="number" class="form-control">
                      </div>
                      <div class="form-group label-floating">
                        <label class="control-label">Przeciwnik<small>(wymagane)</small></label>
                        <input name="firstOpponent" type="number" class="form-control">
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="input-group">
                      <span class="input-group-addon">
  											<i class="material-icons">looks_two</i>
  									  </span>
                      <div class="form-group label-floating">
                        <label class="control-label">Nasz<small>(wymagane)</small></label>
                        <input name="secondOur" type="number" class="form-control">
                      </div>
                      <div class="form-group label-floating">
                        <label class="control-label">Przeciwnik<small>(wymagane)</small></label>
                        <input name="secondOpponent" type="number" class="form-control">
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="input-group">
                      <span class="input-group-addon">
  											<i class="material-icons">looks_3</i>
  									  </span>
                      <div class="form-group label-floating">
                        <label class="control-label">Nasz<small>(opcjonalnie)</small></label>
                        <input name="thirdOur" type="number" class="form-control">
                      </div>
                      <div class="form-group label-floating">
                        <label class="control-label">Przeciwnik<small>(opcjonalnie)</small></label>
                        <input name="thirdOpponent" type="number" class="form-control">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="event">
              <h4 class="info-text"> Wybierz rozgrywki? </h4>
              <div class="row">
                <div class="col-md-10 col-md-offset-1">
                  <table id="eventsTable" data-toggle="table" data-method="post" data-select-item-name="eventID" data-classes="table" data-sort-name="season" data-sort-order="desc" data-click-to-select="true" data-single-select="true" data-url="/ap/events/?active=true">
                    <thead>
                      <tr>
                        <th data-field="state1" data-checkbox="true"></th>
                        <th data-field="_id" data-formatter="idFormatter" data-visible="false">ID</th>
                        <th data-field="season" data-sortable="true">Sezon</th>
                        <th data-field="shortname" data-sortable="true">K.Nazwa</th>
                        <th data-field="type" data-sortable="true">Rodzaj</th>
                        <th data-field="level" data-sortable="true">Poziom</th>
                      </tr>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="players">
              <h4 class="info-text"> Wybierz zawodników, którzy brali udział w meczu? </h4>
              <div class="row">
                <div class="col-md-10 col-md-offset-1">
                  <table id="statsTable" data-toggle="table" data-search="true" data-toolbar="#toolbar" data-select-item-name="playersID" data-click-To-Select="true" data-id-Field="_id" data-method="post" data-url="/ap/users">
                    <thead>
                      <tr>
                        <th data-field="state" data-checkbox="true"></th>
                        <th data-field="_id" data-name="id" data-visible="false">ID</th>
                        <th data-field="username" data-visible="false">username</th>
                        <th data-field="name" data-sortable="true">Imię</th>
                        <th data-field="surname" data-sortable="true">Nazwisko</th>
                        <th data-field="shirtnumber" data-sortable="true">Numer</th>
                        <th data-field="position" data-sortable="true">Pozycja</th>
                      </tr>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="wizard-footer">
            <div class="pull-right">
              <input type='button' class='btn btn-next btn-fill btn-primary btn-wd' name='next' value='Dalej' />
              <input type='submit' class='btn btn-finish btn-fill btn-success btn-wd' name='finish' value='Dodaj' />
            </div>

            <div class="pull-left">
              <input type='button' class='btn btn-previous btn-fill btn-default btn-wd' name='previous' value='Wstecz' />
            </div>
            <div class="clearfix"></div>
          </div>
        </form>
      </div>
    </div>
    <!-- wizard container -->
  </div>
</div>
<!-- end row -->

<script>
  $(function() {
    $('#addGameForm').submit(function(e) {
      // sendAjax();
      var data = {};
      data.teamname = $('input[name=name]').val();
      data.teamlogo = $('input[name=logo]').val();
      data.date = $('input[name=date]').val();
      data.home = $('input[type=checkbox][name=home]').is(':checked');
      data.event = $('#eventsTable').bootstrapTable('getAllSelections');
      data.periods = {};
      data.periods.first = {};
      data.periods.first.our = $('input[name=firstOur]').val();
      data.periods.first.opponent = $('input[name=firstOpponent]').val();
      data.periods.second = {};
      data.periods.second.our = $('input[name=secondOur]').val();
      data.periods.second.opponent = $('input[name=secondOpponent]').val();
      data.periods.third = {};
      data.periods.third.our = $('input[name=thirdOur]').val();
      data.periods.third.opponent = $('input[name=thirdOpponent]').val();
      data.players = [];
      players = $('#statsTable').bootstrapTable('getAllSelections');
      jQuery.each(players, function(i, val) {
        data.players.push({
          playerID: val._id,
          _id: val._id
        });
      });
      $.ajax({
        type: 'POST',
        data: JSON.stringify(data),
        contentType: 'application/json',
        url: '/ap/addgame',
        success: function(value) {
          admins.showNotification('success', 'Poprawnie dodano mecz');
        },
        error: function(value) {
          admins.showNotification('danger', value.responseText);
        },
      });
    });
  });
  // $(function () {
  //   $('#datepicker').datepicker();
  // });
</script>

<script src="/js/jquery.bootstrap.js" type="text/javascript"></script>
<!--  Plugin for the Wizard -->
<script src="/js/material-bootstrap-wizard.js"></script>

<!--  More information about jquery.validate here: http://jqueryvalidation.org/	 -->
<script src="/js/jquery.validate.min.js"></script>
